<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	template="/pages/commun/layoutOcp.xhtml">

	

	<ui:define name="content">

		<applet id="appid" name="appid" permissions="all-permissions"
			scriptable="true" archive="AppletMX.jar"
			code="applet_mxcampus.AppletMX.class" width="0" height="0">
		</applet>

		<!-- <script type="text/javascript">
			function majcarte() {

				try {

					var version = "null";

					//Matricule
					if (document.getElementById("j_matr").value == "") {
						appid.matrPersonnel = " ";
					} else {
						appid.matrPersonnel = document
								.getElementById("j_matr").value;
					}

					
					
								//alert("appid.matrPersonnel  : " + appid.matrPersonnel);

					//NOM  
					if (document.getElementById("j_nom").value == "") {
						appid.nomNaissancePersonnel = " ";
					} else {
						appid.nomNaissancePersonnel = document
								.getElementById("j_nom").value;
					}

									//	alert("appid.nomNaissancePersonnel  : " + appid.nomNaissancePersonnel);

					//PRENOM  
					if (document.getElementById("j_prenom").value == "") {
						appid.prenomPersonnel = " ";
					} else {
						appid.prenomPersonnel = document
								.getElementById("j_prenom").value;
					}


					//alert("appid.prenomPersonnel  : " + appid.prenomPersonnel);
					//SEXE  
					if (document.getElementById("sexe_create:0").checked) {
						appid.sexePersonnel= "M";
					} else if (document.getElementById("sexe_create:1").checked) {
						appid.sexePersonnel = "F";
					} else {
						appid.sexePersonnel = " ";
					}

					//alert("appid.sexePersonnel  : " + appid.sexePersonnel);

					//DATE NAISSANCE 
					if (document.getElementById("datenaissancePerso_input").value == "") {
						appid.dateNaissancePersonnel = " ";
					} else {
						appid.dateNaissancePersonnel = document
								.getElementById("datenaissancePerso_input").value;
					}

					  				//alert("appid.dateNaissancePersonnel  : " + appid.dateNaissancePersonnel);
					  				
					  				
					  				

					//LIEU NAISSANCE 
					if (PF('selectVille').getSelectedValue() == "") {
						appid.lieuNaissancePersonnel = " ";
					} else {
						appid.lieuNaissancePersonnel = PF('selectVille').getSelectedValue();
					}

				//	alert("appid.lieuNaissancePersonnel  : " + PF('selectVille').getSelectedValue());
					//CNI  
					if (document.getElementById("cni").value == "") {
						appid.cniPersonnel = " ";
					} else {
						appid.cniPersonnel = document.getElementById("cni").value;
					}
                      
					//alert("appid.cniPersonnel  : " + appid.cniPersonnel);
					
					if (document.getElementById("telephone").value == "") {
						appid.telephonePersonnel = " ";
					} else {
						appid.telephonePersonnel = document.getElementById("telephone").value;
					}

					//   				alert("appid.nationalitePersonnel  : " + appid.nationalitePersonnel);

					//EMAIL  
					if (PF('selectProfil').getSelectedValue()== "") {
						appid.ProfilPersonnel = " ";
					} else {
						appid.ProfilPersonnel =PF('selectProfil').getSelectedValue();
					}

									//alert("appid.ProfilPersonnel  : " + appid.ProfilPersonnel);

									
									if (document.getElementById("date_expiration_input").value == "") {
						appid.dateexpirationcartePersonnel = " ";
					} else {
						appid.dateexpirationcartePersonnel = document
								.getElementById("date_expiration_input").value;
					}
									
									if (document.getElementById("date_delivrance_input").value == "") {
										appid.datedelivrancecartePersonnel = " ";
									} else {
										appid.datedelivrancecartePersonnel = document
												.getElementById("date_delivrance_input").value;
									}
									if (document.getElementById("j_numCarte").value == "") {
										appid.numCartePersonnel = " ";
									} else {
										appid.numCartePersonnel = document.getElementById("j_numCarte").value;
									}
									
						
					//   				alert("appid.cheminexeimpression  : " + appid.cheminexeimpression);

					//      		    version = appid.GetVersion(); 
				//	version = appid.LancerExe("cmd /c "
			//				+ appid.cheminexeimpression
				//			+ "\\IMPRESSION_CARTE.exe " + "1");
									version = appid.EcritureElectriqueCrazy(1);
									
/************************TRANCHE PROFIL Lundi*******************************/
									
									if (document.getElementById("j_tranLundi").value == "") {
										appid.tranche1 = "00000000";
									} else {
										appid.tranche1 = document
												.getElementById("j_tranLundi").value;
									}
									
									/************************TRANCHE PROFIL Mardi*******************************/
									if (document.getElementById("j_tranMardi").value == "") {
										appid.tranche2 = "00000000";
									} else {
										appid.tranche2 = document
												.getElementById("j_tranMardi").value;
									}
									
									/************************TRANCHE PROFIL Mercredi*******************************/
									if (document.getElementById("j_tranMercredi").value == "") {
										appid.tranche3 = "00000000";
									} else {
										appid.tranche3 = document
												.getElementById("j_tranMercredi").value;
									}
									
									/************************TRANCHE PROFIL JEUDI*******************************/
									if (document.getElementById("j_tranJeudi").value == "") {
										appid.tranche4 = "00000000";
									} else {
										appid.tranche4 = document
												.getElementById("j_tranJeudi").value;
									}
									
									/************************TRANCHE PROFIL Vendredi*******************************/
									if (document.getElementById("j_tranVendredi").value == "") {
										appid.tranche5 = "00000000";
									} else {
										appid.tranche5 = document
												.getElementById("j_tranVendredi").value;
									}
									
									/************************TRANCHE PROFIL Samedi*******************************/
									if (document.getElementById("j_tranSamedi").value == "") {
										appid.tranche6 = "00000000";
									} else {
										appid.tranche6 = document
												.getElementById("j_tranSamedi").value;
									}
									
									/************************TRANCHE PROFIL Dimanche*******************************/
									if (document.getElementById("j_tranDimanche").value == "") {
										appid.tranche7 = "00000000";
									} else {
										appid.tranche7 = document
												.getElementById("j_tranDimanche").value;
									}
					
									
									version =appid.ecrireProfilAcces(10,appid.tranche1);
									version =appid.ecrireProfilAcces(11,appid.tranche2);
									version =appid.ecrireProfilAcces(12,appid.tranche3);
									version =appid.ecrireProfilAcces(13,appid.tranche4);
									version =appid.ecrireProfilAcces(14,appid.tranche5);
									version =appid.ecrireProfilAcces(15,appid.tranche6);
									version =appid.ecrireProfilAcces(16,appid.tranche7);

				} catch (err) {

					alert("Error d'impression de Carte Personnel  : " + err);

				}
			}
		</script> -->

		<p:fieldset
			style="border-style: none; padding-left: 0px !important; padding-right: 1% !important;width:193%;">
			<ul class="menuOpposition">
				<li><h:link
						outcome="/pages/enrolement/gestionPersonnel.xhtml">
						<div>
							<center>#{prezmsg['ENROLEMENT_PERSONNEL']}</center>
						</div>
					</h:link></li>
				<li class="active"><h:link outcome="/pages/enrolement/majPersonnel.xhtml">
						<div>
							<center>#{prezmsg['MAJCARTE_PERSO']}</center>
						</div>
					</h:link></li>
<!-- 				<li><h:link outcome="/pages/enrolement/lecturePersonnel.xhtml"> -->
<!-- 						<div> -->
<!-- 							<center>#{prezmsg['LECTURE_CARTE_PERSO']}</center> -->
<!-- 						</div> -->
<!-- 					</h:link></li> -->
			</ul>
		</p:fieldset>
		<!--         <p:fieldset legend="#{prezmsg['MAJ_PERSONNEL']}"> -->
		<p:ajaxStatus>
			<f:facet name="start">
				<p:graphicImage library="images" name="blueajax.gif"
					styleClass="AjaxStatusLoader" />
			</f:facet>
		</p:ajaxStatus>

		<h:form id="verification" prependId="false">
			<center>
				<p:messages autoUpdate="true" globalOnly="true" closable="true"
					showIcon="false" />
			</center>


			<center>
				<p:fieldset
					style="padding-left: 0px !important; padding-right: 0% !important;"
					styleClass="fieldsetSearch">

					<h:panelGrid columns="3" >
						<h:outputLabel value="#{prezmsg['MATRICULE']}" />
						<p:inputText id="matr1" value="#{personnelMBean.matrSearch}"
							styleClass="textcenter" />
							<p:commandButton id="search"
						icon="ui-icon-custom-rechercheOsc" styleClass="Vall"
						action="#{personnelMBean.findPersonnelByMatr}"   update="verification" process="@this matr1"/>

					</h:panelGrid>
					

				</p:fieldset>
			</center>



			<pe:tooltip for="@(.ui-state-error)" showEvent="focus"
				hideEvent="blur" myPosition="left center" atPosition="right center" />

			<pe:tooltip for="categ_create" myPosition="left center"
				showEvent="click" hideEvent="unfocus" atPosition="right center">
				<h:message for="categ_create" />
			</pe:tooltip>

			<pe:tooltip for="ville_create" myPosition="left center"
				showEvent="click" hideEvent="unfocus" atPosition="right center">
				<h:message for="ville_create" />
			</pe:tooltip>




			<center>
				<p:fieldset
					style="padding-left: 0px !important; padding-right: 0% !important;"
					styleClass="fieldsetCategories">
					<h:panelGrid columns="4" id="informations" cellspacing="8">



						<h:outputLabel value="#{prezmsg['MATRICULE']}" />

						<p:inputText id="j_matr" value="#{personnelMBean.webBean.vo.matr}" readonly="true"
							required="true" disabled="true"
							title="#{component.valid ? '' : utilsMBean.getErrorMessage(component.clientId)}" />



						<h:outputLabel value="#{prezmsg['NOM']}" />



						<p:inputText id="j_nom" value="#{personnelMBean.webBean.vo.nom}"
							required="true"
							title="#{component.valid ? '' : utilsMBean.getErrorMessage(component.clientId)}" />

						<h:outputLabel value="#{prezmsg['PRENOM']}" />
						<p:inputText id="j_prenom"
							value="#{personnelMBean.webBean.vo.prenom}" required="true"
							title="#{component.valid ? '' : utilsMBean.getErrorMessage(component.clientId)}" />



						<h:outputLabel value="#{prezmsg['SEXE']}" />
						<p:selectOneRadio id="sexe_create"
							value="#{personnelMBean.webBean.vo.sexe}" required="true"
							title="#{component.valid ? '' : utilsMBean.getErrorMessage(component.clientId)}">
							<f:selectItem itemLabel="Masculin " itemValue="M" />
							<f:selectItem itemLabel="Feminin " itemValue="F" />
						</p:selectOneRadio>



						<h:outputLabel value="#{prezmsg['DATENAISS']}" />

						<p:calendar id="datenaissancePerso"
							value="#{personnelMBean.webBean.vo.dateNaissance}"
							pattern="dd/MM/yyyy" pages="2" navigator="true" mask="true" />

						<h:outputLabel value="#{prezmsg['LIEUNAISS']}" />

						<p:selectOneMenu id="ville_create" widgetVar="selectVille"
							value="#{personnelMBean.webBean.vo.lieuNaissance}"
							converter="villeConverter" style="width:220px" required="true"
							title="#{component.valid ? '' : utilsMBean.getErrorMessage(component.clientId)}">
							<f:selectItem itemLabel="Choisissez" />
							<f:selectItems value="#{personnelMBean.webBean.villevos}" var="u"
								itemLabel="#{u.libelle}" itemValue="#{u}" />
						</p:selectOneMenu>


						<h:outputLabel value="#{prezmsg['CNI_PERS']}" />
						<p:inputText id="cni" value="#{personnelMBean.webBean.vo.numidentite}"
							required="true"
							title="#{component.valid ? '' : utilsMBean.getErrorMessage(component.clientId)}" />

						<h:outputLabel value="#{prezmsg['TELEPHONE']}" />
						<p:inputText id="telephone"
							value="#{personnelMBean.webBean.vo.telephone}" 
							 >
							 <pe:keyFilter regEx="/[0-9_]/i" preventPaste="false" />
							 </p:inputText>


						<h:outputLabel value="Profil Porteur" />
						<p:selectOneMenu id="categ_create"
							value="#{personnelMBean.webBean.vo.categorie}"
							converter="categoriePorteurConverter" style="width:220px">
							<f:selectItem itemLabel="Choisissez" />
							<f:selectItems value="#{personnelMBean.webBean.categorievos}"
								var="u" itemLabel="#{u.libelle}" itemValue="#{u}" />
						</p:selectOneMenu>

<!--                       <h:outputLabel value="#{prezmsg['PROFIL']}" /> -->
<!-- 						<p:selectOneMenu id="Profil" widgetVar="selectProfil" -->
<!-- 							value="#{personnelMBean.webBean.vo.profil}" -->
<!-- 							converter="critereConverter" style="width:220px"> -->
<!-- 							<f:selectItem itemLabel="Choisissez" /> -->
<!-- 							<f:selectItems value="#{personnelMBean.webBean.profilvos}" -->
<!-- 								var="u" itemLabel="#{u.libelle}" itemValue="#{u}" /> -->
<!-- 								<p:ajax listener="#{personnelMBean.OnchangeProfil}" update="j_tranLundi j_tranMardi j_tranMercredi j_tranJeudi j_tranVendredi j_tranSamedi j_tranDimanche"></p:ajax> -->
<!-- 						</p:selectOneMenu> -->
						
						
<!-- 						<h:outputLabel value="#{prezmsg['DATE_DELIV']}" /> -->
<!-- 						<p:calendar id="date_delivrance"  value="#{personnelMBean.webBean.vo.dateDeliv}"  -->
<!-- 							pattern="dd/MM/yyyy" pages="2" navigator="true" mask="true" /> -->
							
						<h:outputLabel value="#{prezmsg['DATE_EXP']}" />
						<p:calendar id="date_expiration" value="#{personnelMBean.webBean.vo.dateExpiration}"  pattern="dd/MM/yyyy" pages="2" navigator="true" mask="true"  />
						
						<h:outputLabel value="Date Obtension" />

						<p:calendar id="datenaissanceEmbau"
							value="#{personnelMBean.webBean.vo.dateEmbauche}" disabled="true"
							pattern="dd/MM/yyyy" pages="2" navigator="true" mask="true" update="verification"
							>
								
							</p:calendar>
							
							<h:outputLabel value="Numero Carte" />
						<p:inputText id="ncarte"
							value="#{personnelMBean.webBean.vo.numcarte}" disabled="true"
							 />
						
						
						
                                     <h:inputHidden id="j_tranLundi" 
 							value="#{personnelMBean.webBean.vo.tranLundi}" /> 
							
							 <h:inputHidden id="j_tranMardi"
							value="#{personnelMBean.webBean.vo.tranMardi}" /> 
							
							 <h:inputHidden id="j_tranMercredi" 
						value="#{personnelMBean.webBean.vo.tranMercredi}" /> 
							
							 <h:inputHidden id="j_tranJeudi" 
							value="#{personnelMBean.webBean.vo.tranJeudi}" /> 
							
							 <h:inputHidden id="j_tranVendredi" 
							value="#{personnelMBean.webBean.vo.tranVendredi}" /> 
							
							 <h:inputHidden id="j_tranSamedi" 
							value="#{personnelMBean.webBean.vo.tranSamdi}" /> 
							
						<h:inputHidden id="j_tranDimanche" 
							value="#{personnelMBean.webBean.vo.tranDimanche}" /> 
						
						
						<h:inputHidden id="j_numCarte"
							value="#{personnelMBean.webBean.vo.numcarte}" />
						
                   
<!-- 						<p:inputText id="j_cheminEnregPho" -->
<!-- 							value="#{personnelMBean.webBean.vo.cheminEnregPhoto}" -->
<!-- 							rendered="false" /> -->



						<!-- 						<p:inputText id="j_cheminCarteRecto" -->
						<!-- 							value="#{personnelMBean.webBean.vo.cheminCarteRecto}" -->
						<!-- 							rendered="true" styleClass="display" /> -->




						<!-- 						<p:inputText id="j_cheminCarteVerso" -->
						<!-- 							value="#{personnelMBean.webBean.vo.cheminCarteVerso}" -->
						<!-- 							rendered="true" styleClass="display" /> -->




						<!-- 						<p:inputText id="j_cheminExePho" -->
						<!-- 							value="#{personnelMBean.webBean.vo.cheminExePhoto}" -->
						<!-- 							rendered="true" styleClass="display" /> -->



						<!-- 						<p:inputText id="j_cheminExeImpression" -->
						<!-- 							value="#{personnelMBean.webBean.vo.cheminExeImpression}" -->
						<!-- 							rendered="true" styleClass="display" /> -->



						<!-- 						<p:spacer width="-350px" height="0px"/> -->

					</h:panelGrid>

					<p:row>
						<p:commandButton id="maj" value="#{prezmsg['MISE_JOUR_MAJ']}" icon="ui-icon-custom-modifierOsc" disabled="#{personnelMBean.webBean.vo.matr ==null}"
									update="verification"  action="#{personnelMBean.modifier}"  style="width:200px;" 
									styleClass="Val">
						</p:commandButton>
						

					</p:row>


				</p:fieldset>
			</center>
		</h:form>

	</ui:define>
</ui:composition>

